// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AnaliseContrato {
  id                     Int      @id @default(autoincrement())
  dataAnalise            DateTime @default(now()) @map("data_analise")
  nomeCliente            String   @map("nome_cliente") @db.VarChar(255)
  cpfCnpj                String?  @map("cpf_cnpj") @db.VarChar(20)
  numeroContrato         String?  @map("numero_contrato") @db.VarChar(100)
  tipoContrato           String?  @map("tipo_contrato") @db.VarChar(100)
  bancoCredor            String?  @map("banco_credor") @db.VarChar(255)
  valorDivida            Float?
  valorParcela           Float?
  quantidadeParcelas     Int?
  taxaJuros              Float?
  dataVencimentoPrimeira String?  @map("data_vencimento_primeira") @db.VarChar(20)
  dataVencimentoUltima   String?  @map("data_vencimento_ultima") @db.VarChar(20)
  veiculoMarca           String?  @map("veiculo_marca") @db.VarChar(100)
  veiculoModelo          String?  @map("veiculo_modelo") @db.VarChar(255)
  veiculoAno             String?  @map("veiculo_ano") @db.VarChar(10)
  veiculoCor             String?  @map("veiculo_cor") @db.VarChar(50)
  veiculoPlaca           String?  @map("veiculo_placa") @db.VarChar(10)
  veiculoRenavam         String?  @map("veiculo_renavam") @db.VarChar(20)
  temVeiculo             Boolean  @default(false) @map("tem_veiculo")
  observacoes            String?  @db.Text
  recalculoBacen         String?  @map("recalculo_bacen") @db.Text
  estado                 String?  @db.VarChar(2)
  cidade                 String?  @db.VarChar(100)
  idadeCliente           Int?
  temTaxaAbusiva         Boolean  @default(false) @map("tem_taxa_abusiva")
  temCetAlto             Boolean  @default(false) @map("tem_cet_alto")
  temClausulasAbusivas   Boolean  @default(false) @map("tem_clausulas_abusivas")
  arquivoOriginal        String?  @map("arquivo_original") @db.VarChar(500)

  @@index([dataAnalise])
  @@index([nomeCliente])
  @@index([cpfCnpj])
  @@index([numeroContrato])
  @@index([tipoContrato])
  @@index([bancoCredor])
  @@index([taxaJuros])
  @@index([veiculoMarca])
  @@index([veiculoPlaca])
  @@index([temVeiculo])
  @@index([estado])
  @@index([cidade])
  @@index([idadeCliente])
  @@index([temTaxaAbusiva])
  @@index([temCetAlto])
  @@index([temClausulasAbusivas])
  @@index([bancoCredor, tipoContrato], name: "idx_banco_tipo")
  @@index([dataAnalise, bancoCredor], name: "idx_data_banco")
  @@index([estado, bancoCredor], name: "idx_estado_banco")
  @@index([temVeiculo, bancoCredor], name: "idx_tem_veiculo_banco")
  @@map("analises_contratos")
}
